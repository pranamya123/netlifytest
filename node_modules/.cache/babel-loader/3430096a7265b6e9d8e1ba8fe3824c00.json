{"ast":null,"code":"/*\nCopyright (c) 2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\nimport * as React from 'react';\nimport { codeFrameColumns } from '@babel/code-frame';\nexport function assertUnreachable() {\n  throw new Error(\"Didn't expect to get here\");\n}\nexport const formatBabelError = error => {\n  const isTemplate = error.includes('/* @babel/template */');\n  return error.replace('1 | /* @babel/template */;', '').replace(/\\((\\d+):(\\d+)\\)/, (_, line, col) => `(${parseInt(line, 10) - (isTemplate ? 1 : 0)}:${col})`).replace('<>', '').replace('</>', '').replace(/(\\d+) \\|/g, (_, line) => {\n    const lineNum = parseInt(line, 10);\n    const newLineNum = lineNum - 1;\n    const lenDiff = line.length - `${newLineNum}`.length;\n    return `${' '.repeat(lenDiff)}${newLineNum} |`;\n  });\n};\nexport const frameError = (error, code) => {\n  if (error) {\n    const found = error.match(/\\((\\d+)\\:(\\d+)\\)$/);\n\n    if (found) {\n      const location = {\n        start: {\n          line: parseInt(found[1], 10),\n          column: parseInt(found[2], 10)\n        }\n      };\n      return `${error}\\n\\n${codeFrameColumns(code, location)}`;\n    }\n  }\n\n  return error;\n};\nexport const buildPropsObj = (stateProps, updatedPropValues) => {\n  const newProps = {};\n  Object.keys(stateProps).forEach(name => {\n    newProps[name] = Object.assign({}, stateProps[name]);\n  });\n  Object.keys(updatedPropValues).forEach(name => {\n    newProps[name] = {\n      value: typeof updatedPropValues[name] !== 'undefined' ? updatedPropValues[name] : stateProps[name].defaultValue,\n      type: stateProps[name].type,\n      options: stateProps[name].options,\n      enumName: stateProps[name].enumName,\n      description: stateProps[name].description,\n      placeholder: stateProps[name].placeholder,\n      hidden: stateProps[name].hidden,\n      custom: stateProps[name].custom,\n      stateful: stateProps[name].stateful,\n      propHook: stateProps[name].propHook,\n      imports: stateProps[name].imports,\n      defaultValue: stateProps[name].defaultValue\n    };\n  });\n  return newProps;\n}; // creates a duplicate internal state, so we can preserve instant value editing\n// while debouncing top-level state updates that are slow\n\nexport function useValueDebounce(globalVal, globalSet) {\n  const [val, set] = React.useState(globalVal);\n  React.useEffect(() => {\n    // begins a countdown when 'val' changes. if it changes before countdown\n    // ends, clear the timeout avoids lodash debounce to avoid stale\n    // values in globalSet.\n    if (val !== globalVal) {\n      const timeout = setTimeout(() => globalSet(val), 250);\n      return () => clearTimeout(timeout);\n    }\n\n    return void 0;\n  }, [val]);\n  React.useEffect(() => {\n    set(globalVal);\n  }, [globalVal]);\n  return [val, set];\n}\nexport function useHover() {\n  const [value, setValue] = React.useState(false);\n  const ref = React.useRef(null);\n\n  const handleMouseOver = () => setValue(true);\n\n  const handleMouseOut = () => setValue(false);\n\n  React.useEffect(() => {\n    const node = ref.current;\n\n    if (node) {\n      node.addEventListener('mouseover', handleMouseOver);\n      node.addEventListener('mouseout', handleMouseOut);\n      return () => {\n        node.removeEventListener('mouseover', handleMouseOver);\n        node.removeEventListener('mouseout', handleMouseOut);\n      };\n    }\n\n    return undefined;\n  }, [ref.current]);\n  return [ref, value];\n}\nexport function clone(obj) {\n  if (typeof obj == 'function') {\n    return obj;\n  }\n\n  const result = Array.isArray(obj) ? [] : {};\n\n  for (const key in obj) {\n    const value = obj[key];\n    const type = {}.toString.call(value).slice(8, -1);\n\n    if (type == 'Array' || type == 'Object') {\n      result[key] = clone(value);\n    } else {\n      result[key] = value;\n    }\n  }\n\n  return result;\n}\nexport function getStyles(style, className) {\n  return className ? {\n    className\n  } : {\n    style\n  };\n}","map":{"version":3,"sources":["../../src/utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\nCopyright (c) 2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\nimport * as React from 'react';\nimport { codeFrameColumns } from '@babel/code-frame';\nexport function assertUnreachable() {\n    throw new Error(\"Didn't expect to get here\");\n}\nexport const formatBabelError = (error) => {\n    const isTemplate = error.includes('/* @babel/template */');\n    return error\n        .replace('1 | /* @babel/template */;', '')\n        .replace(/\\((\\d+):(\\d+)\\)/, (_, line, col) => `(${parseInt(line, 10) - (isTemplate ? 1 : 0)}:${col})`)\n        .replace('<>', '')\n        .replace('</>', '')\n        .replace(/(\\d+) \\|/g, (_, line) => {\n        const lineNum = parseInt(line, 10);\n        const newLineNum = lineNum - 1;\n        const lenDiff = line.length - `${newLineNum}`.length;\n        return `${' '.repeat(lenDiff)}${newLineNum} |`;\n    });\n};\nexport const frameError = (error, code) => {\n    if (error) {\n        const found = error.match(/\\((\\d+)\\:(\\d+)\\)$/);\n        if (found) {\n            const location = {\n                start: { line: parseInt(found[1], 10), column: parseInt(found[2], 10) },\n            };\n            return `${error}\\n\\n${codeFrameColumns(code, location)}`;\n        }\n    }\n    return error;\n};\nexport const buildPropsObj = (stateProps, updatedPropValues) => {\n    const newProps = {};\n    Object.keys(stateProps).forEach(name => {\n        newProps[name] = Object.assign({}, stateProps[name]);\n    });\n    Object.keys(updatedPropValues).forEach(name => {\n        newProps[name] = {\n            value: typeof updatedPropValues[name] !== 'undefined'\n                ? updatedPropValues[name]\n                : stateProps[name].defaultValue,\n            type: stateProps[name].type,\n            options: stateProps[name].options,\n            enumName: stateProps[name].enumName,\n            description: stateProps[name].description,\n            placeholder: stateProps[name].placeholder,\n            hidden: stateProps[name].hidden,\n            custom: stateProps[name].custom,\n            stateful: stateProps[name].stateful,\n            propHook: stateProps[name].propHook,\n            imports: stateProps[name].imports,\n            defaultValue: stateProps[name].defaultValue,\n        };\n    });\n    return newProps;\n};\n// creates a duplicate internal state, so we can preserve instant value editing\n// while debouncing top-level state updates that are slow\nexport function useValueDebounce(globalVal, globalSet) {\n    const [val, set] = React.useState(globalVal);\n    React.useEffect(() => {\n        // begins a countdown when 'val' changes. if it changes before countdown\n        // ends, clear the timeout avoids lodash debounce to avoid stale\n        // values in globalSet.\n        if (val !== globalVal) {\n            const timeout = setTimeout(() => globalSet(val), 250);\n            return () => clearTimeout(timeout);\n        }\n        return void 0;\n    }, [val]);\n    React.useEffect(() => {\n        set(globalVal);\n    }, [globalVal]);\n    return [val, set];\n}\nexport function useHover() {\n    const [value, setValue] = React.useState(false);\n    const ref = React.useRef(null);\n    const handleMouseOver = () => setValue(true);\n    const handleMouseOut = () => setValue(false);\n    React.useEffect(() => {\n        const node = ref.current;\n        if (node) {\n            node.addEventListener('mouseover', handleMouseOver);\n            node.addEventListener('mouseout', handleMouseOut);\n            return () => {\n                node.removeEventListener('mouseover', handleMouseOver);\n                node.removeEventListener('mouseout', handleMouseOut);\n            };\n        }\n        return undefined;\n    }, [ref.current]);\n    return [ref, value];\n}\nexport function clone(obj) {\n    if (typeof obj == 'function') {\n        return obj;\n    }\n    const result = Array.isArray(obj) ? [] : {};\n    for (const key in obj) {\n        const value = obj[key];\n        const type = {}.toString.call(value).slice(8, -1);\n        if (type == 'Array' || type == 'Object') {\n            result[key] = clone(value);\n        }\n        else {\n            result[key] = value;\n        }\n    }\n    return result;\n}\nexport function getStyles(style, className) {\n    return className ? { className } : { style };\n}\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"module"}